<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Profile</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../static/global.css">
    <link rel="stylesheet" href="../static/profile.css" />
</head>

<body>
    <div class="spinner"></div>

    <a href="../templates/home.html" class="back-button">&larr; Quay L·∫°i</a>

    <!-- Updated dark-mode-toggle to match other pages -->
    <div class="dark-mode-toggle">
        <label class="text-label" for="darkModeToggle">Dark Mode</label>
        <label class="switch">
            <input type="checkbox" id="darkModeToggle">
            <span class="slider"></span>
        </label>
    </div>

    <div class="cards-container" data-animate="fadeIn">
        <!-- Left Card (Profile Info) -->
        <div class="card profile-card">
            <div class="profile-header">
                <div class="cover-photo"></div>
                <div class="profile-pic-container">
                    <div class="placeholder-avatar">
                        <span>NV</span>
                    </div>
                    <div class="profile-pic-edit">
                        <i class="fas fa-camera"></i>
                    </div>
                </div>
            </div>
            <div class="profile-info">
                <h1 class="profile-name" id="profileName" onclick="toggleNameEdit()">Nguy·ªÖn VƒÉn Nam</h1>
                <input type="text" class="profile-name-input" id="profileNameInput" value="Nguy·ªÖn VƒÉn Nam"
                    onblur="saveName()" onkeydown="handleNameKeydown(event)">
                <p class="profile-subtitle">Sinh vi√™n nƒÉm 3 | MSSV: 21520123</p>
                <div class="profile-stats">
                    <div class="stat">
                        <span class="stat-value">3.8</span>
                        <span class="stat-label">GPA</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">8</span>
                        <span class="stat-label">H·ªçc k·ª≥</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">5</span>
                        <span class="stat-label">Th√†nh t√≠ch</span>
                    </div>
                </div>
                <div class="profile-actions">
                    <button class="btn btn-primary"><i class="fas fa-edit"></i> Ch·ªânh s·ª≠a</button>
                    <button class="btn btn-secondary"><i class="fas fa-cog"></i> C√†i ƒë·∫∑t</button>
                </div>
            </div>
        </div>

        <!-- Right Card (Achievements) -->
        <div class="card achievements-card with-title">
            <div class="card-title">
                <span class="shimmer-text">Danh Hi·ªáu</span>
            </div>
            <div class="achievements">
                <div class="achievement">
                    <div class="achievement-icon gold">üèÜ</div>
                    <div class="achievement-content">
                        <h3>H·ªçc sinh xu·∫•t s·∫Øc</h3>
                        <p>H·ªçc k·ª≥ Xu√¢n 2023</p>
                    </div>
                </div>
                <div class="achievement">
                    <div class="achievement-icon silver">üåü</div>
                    <div class="achievement-content">
                        <h3>5 nƒÉm li√™n ti·∫øp ƒë·∫°t danh hi·ªáu</h3>
                        <p>2018 - 2023</p>
                    </div>
                </div>
                <div class="achievement">
                    <div class="achievement-icon bronze">üéì</div>
                    <div class="achievement-content">
                        <h3>Th·ªß khoa ƒë·∫ßu v√†o</h3>
                        <p>Khoa C√¥ng ngh·ªá Th√¥ng tin</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Card (Bio) -->
        <div class="card bio-card with-title">
            <div class="card-title">
                <span class="shimmer-text">M√¥ t·∫£ v·ªÅ b·∫£n th√¢n</span>
            </div>
            <div class="bio-content">
                <p>T√¥i l√† sinh vi√™n nƒÉm 3 ng√†nh C√¥ng ngh·ªá Th√¥ng tin, chuy√™n ng√†nh Tr√≠ tu·ªá nh√¢n t·∫°o. V·ªõi ni·ªÅm ƒëam m√™ v·ªÅ
                    c√¥ng ngh·ªá v√† l·∫≠p tr√¨nh, t√¥i lu√¥n n·ªó l·ª±c h·ªçc h·ªèi v√† ph√°t tri·ªÉn b·∫£n th√¢n m·ªói ng√†y.</p>
                <p>S·ªü th√≠ch: ƒê·ªçc s√°ch, ch∆°i c·ªù vua, v√† ph√°t tri·ªÉn c√°c ·ª©ng d·ª•ng web.</p>
                <div class="skills">
                    <h3>K·ªπ nƒÉng</h3>
                    <div class="skill-tags">
                        <span class="skill-tag">HTML/CSS</span>
                        <span class="skill-tag">JavaScript</span>
                        <span class="skill-tag">Python</span>
                        <span class="skill-tag">Machine Learning</span>
                        <span class="skill-tag">Data Structures</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../scripts/global.js"></script>
    <script>
        // Interactive light effect
        const cards = document.querySelectorAll('.card');
        cards.forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const percentX = (x / rect.width) * 100;
                const percentY = (y / rect.height) * 100;
                card.style.setProperty('--mouse-x', percentX + '%');
                card.style.setProperty('--mouse-y', percentY + '%');
                card.style.setProperty('--light-opacity', '1');
            });
            card.addEventListener('mouseleave', () => {
                card.style.setProperty('--light-opacity', '0');
            });
        });

        // Profile picture hover effect
        const profilePicContainer = document.querySelector('.profile-pic-container');
        if (profilePicContainer) {
            profilePicContainer.addEventListener('mouseenter', () => {
                profilePicContainer.classList.add('hovered');
            });
            profilePicContainer.addEventListener('mouseleave', () => {
                profilePicContainer.classList.remove('hovered');
            });
        }

        // Profile name editing functionality
        function toggleNameEdit() {
            const nameElem = document.getElementById('profileName');
            const inputElem = document.getElementById('profileNameInput');

            nameElem.style.display = 'none';
            inputElem.style.display = 'block';
            inputElem.focus();
            inputElem.select();
        }

        function saveName() {
            const nameElem = document.getElementById('profileName');
            const inputElem = document.getElementById('profileNameInput');
            const newName = inputElem.value.trim();

            if (newName) {
                nameElem.textContent = newName;
            }

            nameElem.style.display = 'block';
            inputElem.style.display = 'none';

            // For a real application, here you would save the name to the server
            console.log('Name updated to:', newName);
        }

        function handleNameKeydown(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                saveName();
            } else if (event.key === 'Escape') {
                event.preventDefault();
                const nameElem = document.getElementById('profileName');
                const inputElem = document.getElementById('profileNameInput');

                inputElem.value = nameElem.textContent; // Reset to original
                nameElem.style.display = 'block';
                inputElem.style.display = 'none';
            }
        }

        // Initialize cards with RGB variables for effects
        document.querySelectorAll('.card').forEach(card => {
            // Extract RGB values from primary color for effects
            const style = getComputedStyle(document.body);
            const primaryColor = style.getPropertyValue('--primary-color') || '#6a11cb';

            // Convert hex to RGB
            const hex = primaryColor.trim();
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);

            card.style.setProperty('--primary-color-rgb', `${r}, ${g}, ${b}`);
        });
    </script>
</body>

</html>